<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 4 Mermaid Architecture Test</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 40px;
            background-color: #f5f5f5;
        }
        .diagram-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        h1, h2 {
            color: #333;
        }
        .mermaid {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>ğŸ§œâ€â™€ï¸ Phase 4 Mermaid Architecture Test</h1>
    <p>This page demonstrates the Mermaid diagrams from the Phase 4 architecture documentation.</p>

    <div class="diagram-container">
        <h2>1. System Architecture Overview</h2>
        <div class="mermaid">
graph TB
    subgraph "Audio Input Sources"
        IM["ğŸ¤ Internal Mic<br/>(Raw/Calibrated)"]
        EM["ğŸ™ï¸ External Mic<br/>(Raw/Calibrated)"]
        LI["ğŸ”Œ Audio Line Input<br/>(Analog)"]
        USB["ğŸ›ï¸ USB Interface<br/>(Professional)"]
    end
    
    subgraph "AudioInputManager"
        DS["ğŸ” Detection System<br/>â€¢ Device Enumeration<br/>â€¢ Classification<br/>â€¢ Capabilities"]
        CE["âš™ï¸ Calibration Engine<br/>â€¢ Frequency Response<br/>â€¢ Sensitivity<br/>â€¢ Noise Floor"]
        SP["ğŸ“¡ Stream Processing<br/>â€¢ Low Latency<br/>â€¢ High Quality<br/>â€¢ Multi-Channel"]
    end
    
    subgraph "Triple-Path Analysis"
        REF["ğŸ“Š Reference Path<br/>(Digital)"]
        SIM["ğŸ”„ Simulation Path<br/>(Processed)"]
        REAL["ğŸŒ Reality Path<br/>(Measured)"]
    end
    
    IM --> DS
    EM --> DS
    LI --> DS
    USB --> DS
    
    DS --> CE
    CE --> SP
    
    SP --> REF
    SP --> SIM
    SP --> REAL
    
    style IM fill:#e1f5fe
    style EM fill:#e1f5fe
    style LI fill:#e8f5e8
    style USB fill:#fff3e0
    style REF fill:#f3e5f5
    style SIM fill:#e8f5e8
    style REAL fill:#fff8e1
        </div>
    </div>

    <div class="diagram-container">
        <h2>2. Signal Flow Architecture</h2>
        <div class="mermaid">
flowchart TD
    subgraph "Input Sources"
        REF2["ğŸ“Š Reference Signals<br/>(Digital)"]
        MIC["ğŸ¤ Microphone Input<br/>(Analog)"]
        USB2["ğŸ›ï¸ USB Interface<br/>(Professional)"]
    end
    
    subgraph "Processing Layer"
        subgraph "Speaker Processing"
            DN["ğŸ”„ DelayNode Chain<br/>â€¢ A_left<br/>â€¢ A_right<br/>â€¢ B_left<br/>â€¢ B_right"]
            CF["ğŸŒŠ Comb Filter<br/>â€¢ Dry Path<br/>â€¢ Wet Path"]
            DN --> CF
        end
        
        subgraph "Input Processing"
            CAL["âš™ï¸ Calibration<br/>â€¢ Freq Correction<br/>â€¢ Sensitivity<br/>â€¢ Noise Filter"]
        end
    end
    
    subgraph "Analysis Engine"
        AR["ğŸ“ˆ analyzers.reference<br/>(Raw Digital)"]
        AI["ğŸ“Š analyzers.input<br/>(Processed Digital)"]
        AC["ğŸ¯ analyzers.calibrated<br/>(Real Measurement)"]
    end
    
    subgraph "Educational Output"
        TVR["ğŸ¤” Theory vs Reality"]
        SV["âœ… Simulation Validation"]
        RC["ğŸ  Room Characterization"]
        PM["ğŸ“Š Professional Metrics"]
    end
    
    REF2 --> DN
    MIC --> CAL
    USB2 --> CAL
    
    REF2 --> AR
    CF --> AI
    CAL --> AC
    
    AR --> TVR
    AI --> SV
    AC --> RC
    
    TVR --> PM
    SV --> PM
    RC --> PM
    
    style REF2 fill:#e3f2fd
    style MIC fill:#f3e5f5
    style USB2 fill:#fff3e0
    style DN fill:#e8f5e8
    style CF fill:#e8f5e8
    style CAL fill:#fff8e1
    style AR fill:#e1f5fe
    style AI fill:#e8f5e8
    style AC fill:#fff3e0
        </div>
    </div>

    <div class="diagram-container">
        <h2>3. Performance Metrics</h2>
        <div class="mermaid">
graph TB
    subgraph "Performance Metrics Dashboard"
        subgraph "Audio Quality"
            AQ1["âš¡ Latency < 50ms"]
            AQ2["ğŸ“¡ SNR > 60dB"]
            AQ3["ğŸ¯ THD+N < 0.1%"]
            AQ4["ğŸ“Š Dynamic Range > 90dB"]
        end
        
        subgraph "System Performance"
            SP1["ğŸ’» CPU < 10%"]
            SP2["ğŸ§  RAM < 500MB"]
            SP3["ğŸµ Real-time 48kHz"]
            SP4["â±ï¸ Stable Operation > 1hr"]
        end
        
        subgraph "Accuracy"
            AC1["ğŸ›ï¸ Calibration Â±2dB"]
            AC2["ğŸ¼ Frequency Â±1Hz"]
            AC3["â²ï¸ Time Â±0.1ms"]
            AC4["ğŸ”„ Phase Â±5Â°"]
        end
    end
    
    style AQ1 fill:#e8f5e8
    style AQ2 fill:#e8f5e8
    style AQ3 fill:#e8f5e8
    style AQ4 fill:#e8f5e8
    style SP1 fill:#e3f2fd
    style SP2 fill:#e3f2fd
    style SP3 fill:#e3f2fd
    style SP4 fill:#e3f2fd
    style AC1 fill:#fff3e0
    style AC2 fill:#fff3e0
    style AC3 fill:#fff3e0
    style AC4 fill:#fff3e0
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>

    <footer style="margin-top: 50px; text-align: center; color: #666;">
        <p>ğŸ§œâ€â™€ï¸ Powered by Mermaid.js | Qualia-NSS Phase 4 Architecture</p>
    </footer>
</body>
</html>