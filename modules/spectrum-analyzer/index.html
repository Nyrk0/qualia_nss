<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spectrum Analyzer (Standalone)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="header">
      <h1>Live Spectrum Analyzer</h1>
      <p class="subtitle">Internal mic • 20 Hz – 20 kHz • Log frequency</p>
    </header>

    <section class="controls">
      <button id="startBtn" class="btn primary">Start Microphone</button>
      <button id="stopBtn" class="btn" disabled>Stop</button>
      <span id="status" class="status">Idle</span>
    </section>

    <!-- Generator controls: sine tone + white/pink/brown noise -->
    <section class="gen-controls" aria-label="Signal generators">
      <div class="gen-row">
        <input id="toneSlider" class="tone-slider" type="range" min="0" max="1" step="0.001" value="0.566" aria-label="Sine frequency (Hz)">
        <div class="gen-buttons">
          <button id="toneToggle" class="btn icon" title="Toggle sine" aria-label="Toggle sine tone">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10v4h3l4 4V6L6 10H3zm13.5 2a2.5 2.5 0 0 0-1.5-2.3v4.6c.9-.4 1.5-1.3 1.5-2.3zm2.5 0c0 2.5-1.5 4.6-3.5 5.5v-11c2 .9 3.5 3 3.5 5.5z"/></svg>
          </button>
          <button id="whiteToggle" class="btn icon white" title="Toggle white noise" aria-label="Toggle white noise">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10v4h3l4 4V6L6 10H3zm13.5 2a2.5 2.5 0 0 0-1.5-2.3v4.6c.9-.4 1.5-1.3 1.5-2.3zm2.5 0c0 2.5-1.5 4.6-3.5 5.5v-11c2 .9 3.5 3 3.5 5.5z"/></svg>
          </button>
          <button id="pinkToggle" class="btn icon pink" title="Toggle pink noise" aria-label="Toggle pink noise">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10v4h3l4 4V6L6 10H3zm13.5 2a2.5 2.5 0 0 0-1.5-2.3v4.6c.9-.4 1.5-1.3 1.5-2.3zm2.5 0c0 2.5-1.5 4.6-3.5 5.5v-11c2 .9 3.5 3 3.5 5.5z"/></svg>
          </button>
          <button id="brownToggle" class="btn icon brown" title="Toggle brown noise" aria-label="Toggle brown noise">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10v4h3l4 4V6L6 10H3zm13.5 2a2.5 2.5 0 0 0-1.5-2.3v4.6c.9-.4 1.5-1.3 1.5-2.3zm2.5 0c0 2.5-1.5 4.6-3.5 5.5v-11c2 .9 3.5 3 3.5 5.5z"/></svg>
          </button>
        </div>
        <div class="gen-readout"><span id="toneFreq">1000 Hz</span></div>
      </div>
    </section>

    <!-- Visualization controls -->
    <section class="viz-controls" aria-label="Visualization controls">
      <button id="lineOnlyBtn" class="btn small toggle active" title="Show line only (no fill)">Line only</button>
      <div class="fft-controls" style="display:inline-flex; gap:8px; align-items:center; margin-left:12px;">
        <button id="fftDownBtn" class="btn small" title="Lower FFT size">FFT −</button>
        <span id="fftSizeLabel" class="mono small" aria-live="polite">8192</span>
        <button id="fftUpBtn" class="btn small" title="Raise FFT size">FFT +</button>
      </div>
      <button id="smoothingBtn" class="btn small" style="margin-left:12px;" title="Cycle smoothing amount">Smooth: 0.5</button>
    </section>

    <section class="canvas-wrap">
      <canvas id="spectrumCanvas" width="960" height="320" aria-label="Spectrum analyzer visualization"></canvas>
    </section>

    <section id="errorBox" class="error" hidden></section>

    <footer class="footer">
      <small>Tip: Reduce background apps or lower FFT size if performance dips.</small>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
